<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Piano</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: #18181b;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  color: #fafafa;
}

.container {
  padding: 2rem;
  max-width: 1200px;
  width: 100%;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #fafafa;
}

.controls {
  display: flex;
  gap: 1.5rem;
  align-items: center;
  flex-wrap: wrap;
}

.control-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.control-group label {
  font-size: 0.875rem;
  color: #a1a1aa;
}

.volume-slider {
  width: 100px;
  height: 4px;
  background: #3f3f46;
  border-radius: 2px;
  outline: none;
  -webkit-appearance: none;
}

.volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  background: #fafafa;
  border-radius: 50%;
  cursor: pointer;
}

.volume-slider::-moz-range-thumb {
  width: 14px;
  height: 14px;
  background: #fafafa;
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

.toggle {
  position: relative;
  width: 48px;
  height: 24px;
  background: #3f3f46;
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.2s;
}

.toggle.active {
  background: #71717a;
}

.toggle::before {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  background: #fafafa;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  transition: left 0.2s;
}

.toggle.active::before {
  left: 27px;
}

.piano {
  display: flex;
  justify-content: center;
  background: #27272a;
  padding: 2rem;
  border-radius: 8px;
  overflow-x: auto;
}

.keys {
  display: flex;
  position: relative;
}

.key {
  position: relative;
  cursor: pointer;
  user-select: none;
  transition: all 0.05s;
}

.key.white {
  width: 60px;
  height: 200px;
  background: #fafafa;
  border: 1px solid #27272a;
  border-radius: 0 0 4px 4px;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 1rem;
}

.key.white:active,
.key.white.active {
  background: #e4e4e7;
  box-shadow: inset 0 4px 8px rgba(0,0,0,0.1);
}

.key.black {
  width: 36px;
  height: 120px;
  background: #18181b;
  border-radius: 0 0 4px 4px;
  position: absolute;
  z-index: 2;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 0.75rem;
}

.key.black:active,
.key.black.active {
  background: #3f3f46;
}

.key span {
  font-size: 0.75rem;
  color: #71717a;
  font-weight: 500;
}

.key.black span {
  color: #a1a1aa;
}

.key.hide span {
  display: none;
}

@media (max-width: 768px) {
  .container {
    padding: 1rem;
  }
  
  .header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .piano {
    padding: 1rem;
  }
  
  .key.white {
    width: 45px;
    height: 160px;
  }
  
  .key.black {
    width: 28px;
    height: 100px;
  }
}

@media (max-width: 480px) {
  .key.white {
    width: 35px;
    height: 140px;
  }
  
  .key.black {
    width: 22px;
    height: 85px;
  }
  
  .key span {
    font-size: 0.625rem;
  }
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1 class="title">Piano</h1>
    <div class="controls">
      <div class="control-group">
        <label>Volume</label>
        <input type="range" class="volume-slider" min="0" max="1" step="0.1" value="0.5">
      </div>
      <div class="control-group">
        <label>Show Keys</label>
        <div class="toggle active"></div>
      </div>
    </div>
  </div>
  
  <div class="piano">
    <div class="keys"></div>
  </div>
</div>

<script>
const keys = [
  { note: 'C', type: 'white', key: 'A', freq: 261.63 },
  { note: 'C#', type: 'black', key: 'W', freq: 277.18, offset: 42 },
  { note: 'D', type: 'white', key: 'S', freq: 293.66 },
  { note: 'D#', type: 'black', key: 'E', freq: 311.13, offset: 102 },
  { note: 'E', type: 'white', key: 'D', freq: 329.63 },
  { note: 'F', type: 'white', key: 'F', freq: 349.23 },
  { note: 'F#', type: 'black', key: 'T', freq: 369.99, offset: 222 },
  { note: 'G', type: 'white', key: 'G', freq: 392.00 },
  { note: 'G#', type: 'black', key: 'Y', freq: 415.30, offset: 282 },
  { note: 'A', type: 'white', key: 'H', freq: 440.00 },
  { note: 'A#', type: 'black', key: 'U', freq: 466.16, offset: 342 },
  { note: 'B', type: 'white', key: 'J', freq: 493.88 },
  { note: 'C2', type: 'white', key: 'K', freq: 523.25 }
];

const keysContainer = document.querySelector('.keys');
const volumeSlider = document.querySelector('.volume-slider');
const toggle = document.querySelector('.toggle');

let audioContext;
let volume = 0.5;
let showKeys = true;

function initAudio() {
  if (!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
  }
}

function playNote(frequency) {
  initAudio();
  
  const oscillator = audioContext.createOscillator();
  const gainNode = audioContext.createGain();
  
  oscillator.connect(gainNode);
  gainNode.connect(audioContext.destination);
  
  oscillator.frequency.value = frequency;
  oscillator.type = 'sine';
  
  gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
  
  oscillator.start(audioContext.currentTime);
  oscillator.stop(audioContext.currentTime + 1);
}

function createKeys() {
  keys.forEach((keyData, index) => {
    const keyElement = document.createElement('div');
    keyElement.classList.add('key', keyData.type);
    keyElement.dataset.key = keyData.key;
    keyElement.dataset.freq = keyData.freq;
    
    if (keyData.type === 'black') {
      keyElement.style.left = `${keyData.offset}px`;
    }
    
    const span = document.createElement('span');
    span.textContent = keyData.key;
    keyElement.appendChild(span);
    
    keyElement.addEventListener('mousedown', () => {
      keyElement.classList.add('active');
      playNote(keyData.freq);
    });
    
    keyElement.addEventListener('mouseup', () => {
      keyElement.classList.remove('active');
    });
    
    keyElement.addEventListener('mouseleave', () => {
      keyElement.classList.remove('active');
    });
    
    keysContainer.appendChild(keyElement);
  });
}

document.addEventListener('keydown', (e) => {
  if (e.repeat) return;
  
  const key = e.key.toUpperCase();
  const keyData = keys.find(k => k.key === key);
  
  if (keyData) {
    const keyElement = document.querySelector(`[data-key="${key}"]`);
    if (keyElement) {
      keyElement.classList.add('active');
      playNote(keyData.freq);
    }
  }
});

document.addEventListener('keyup', (e) => {
  const key = e.key.toUpperCase();
  const keyElement = document.querySelector(`[data-key="${key}"]`);
  
  if (keyElement) {
    keyElement.classList.remove('active');
  }
});

volumeSlider.addEventListener('input', (e) => {
  volume = parseFloat(e.target.value);
});

toggle.addEventListener('click', () => {
  showKeys = !showKeys;
  toggle.classList.toggle('active');
  
  document.querySelectorAll('.key').forEach(key => {
    if (showKeys) {
      key.classList.remove('hide');
    } else {
      key.classList.add('hide');
    }
  });
});

createKeys();
</script>
</body>
</html>
